define(["jquery"],function(a){var b=6e4;return{setLoadVideoListTime:function(a){a=a},initLiveStream:function(c,d,e,f,g,h,i,j){var k=null,l=0,m=[],n=i,o=!1,p=function(){m.length>l?(k.src=e+"&id="+m[l],k.play(),l++):o=!1},q=function(){a.ajax({url:d,data:{action:"listlivestreamvideoids",sincetime:n,cmid:f,vpl:g,userid:h},method:"POST"}).done(function(a){m=m.concat(a.videoids),n=a.newtime,o||a.videoids.length>0&&(o=!0,p())}),setTimeout(q,b)};a(window).load(function(){k=document.getElementById(c),k.addEventListener("ended",function(a){p()}),j.length>0&&(m=j,o=!0,p()),q()})}}});